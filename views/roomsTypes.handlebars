{{!--

roomTypeDeletableStatus: Please pass a roomStatus variable when rendering this template. 
This variable means if a roomType is deletable or not.
You can add a new key-value pair to the roomTypes collection, or you can just calculate its availability and set it as a new variable. 

--}}

{{#if error}}
<div class="error">
    <p>Error code {{statusCode}}: {{error}}</p>
</div>
{{/if}}
<h2>All rooms of the hotel</h2>
<div class="searchResult">
    <ol>
        {{#each roomTypes}}
        <li>
            <div class="searchResultItem">
                <div class="roomTypePictures">
                    {{#each roomTypes.pictures}}
                    <img src="{{roomTypes.pictures}}" alt="roomTypePicture">
                    {{/each}}
                </div>
                <div class="roomTypeName">
                    <p>{{roomTypes.name}}</p>
                </div>                
                <div class="roomTypePrice">
                    <p>{{roomTypes.roomTypePrice}}</p>
                </div>
            </div>
            {{#if roomTypeDeletableStatus}}
            <div class="deleteRoomType">
                <form action="/hotel/{{hotelId}}/roomType/{{roomTypes.id}}" method="DELETE" id="deleteRoomType-form" class="new-form">
                    <input type="hidden" name="hotelId" value="{{hotelId}}">
                    <button type="submit" id="deleteRoomType-button">Delete</button>
                </form>
            </div>
            {{/if}}
            <div class="editRoomType">
                <form action="/hotel/{{hotelId}}/roomType/{{roomTypes.id}}" method="PATCH" id="editRoomType-form" class="new-form">
                    <label for="roomTypeName" id="roomTypeName-label">
                        Room Type:
                    </label>
                    <input type="text" name="roomTypeName" id="roomTypeName">
                    <label for="roomTypePrice" id="roomTypePrice-label">
                        Room Price:
                    </label>
                    <input type="number" name="roomTypePrice" id="roomTypePrice">
                    <label for="roomTypePictures" id="roomTypePictures-label">
                        Room Pictures:
                    </label>
                    <input type="hidden" name="hotelId" value="{{hotelId}}">
                    <button type="submit" id="editRoomType-button">Edit</button>
                </form>
            </div>
        </li>
        {{/each}}
    </ol>
    <div class="addNewRoomType">
        <form action="/hotel/{{hotelId}}/roomType" method="POST" id="addNewRoom-form" class="new-form">
            <label for="roomTypeName" id="roomTypeName-label">
                Room Type:
            </label>
            <input type="text" name="roomTypeName" id="roomTypeName">
            <label for="roomTypePrice" id="roomTypePrice-label">
                Room Price:
            </label>
            <input type="number" name="roomTypePrice" id="roomTypePrice">
            <label for="roomTypePictures" id="roomTypePictures-label">
                Room Pictures:
            </label>
            <input type="file" name="roomTypePictures" id="roomTypePictures">
            <input type="hidden" name="hotelId" value="{{hotelId}}">
            <button type="submit" id="addNewRoom-button">Add</button>
        </form>
    </div>
</div>
<div class="error" id="client">
    <p id="client-error"></p>
</div>
{{#if (eq user.identity "guest")}}
<div class="new-user">
    <p>You can <a href="/register">register</a> or <a href="/login">login</a> first.</p>
</div>
{{/if}}