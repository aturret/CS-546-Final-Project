{{!--

roomTypes: Please pass all roomTpyes when rendering this template.
roomStatus: Please pass a roomStatus variable when rendering this template. You can add a new key-value pair to the
roomTypes collection, or you can just calculate its availability and set it as a new variable.

--}}

{{#if error}}
<div class="error">
    <p>Error code {{statusCode}}: {{error}}</p>
</div>
{{/if}}
<h2>All rooms of the hotel</h2>
<div class="searchResult">
    <ol>
        {{#each rooms}}
        <li>
            <div class="searchResultItem">
                <div class="roomNumber">
                    <p>{{rooms.roomNumber}}</p>
                </div>
                <div class="roomType">
                    <p>{{rooms.roomType}}</p>
                </div>
                <div class="roomStatus">
                    <p>{{rooms.roomStatus}}</p>
                </div>
            </div>
            {{#if (eq rooms.roomStatus "available")}}
            <div class="deleteRoom">
                <form action="/hotel/{{hotelId}}/room/{{rooms.roomId}}/delete" method="DELETE">
                    <button type="submit">Delete</button>
                </form>
            </div>
            <div class="editRoom">
                <form action="/hotel/{{hotelId}}/room/{{rooms.roomId}}/edit" method="PATCH" id="editRoom-form"
                    class="new-form">
                    <label id="roomNumberInput-label-{{rooms.roomId}}">
                        Room Number:
                        <input type="text" name="roomNumberInput">
                    </label>
                    <label id="roomTypeInput-label-{{rooms.roomId}}">
                        Room Type:
                        <select name="roomTypeInput">
                            {{#each roomTypes}}
                            <option value="{{roomTypes.typeName}}">{{roomTypes.typeName}}</option>
                            {{/each}}
                        </select>
                    </label>

                    <button type="submit" id="editRoom-button">Edit</button>
                </form>
            </div>
            {{/if}}
        </li>
        {{/each}}
    </ol>
    <div class="addNewRoom">
        <form action="/hotel/{{hotelId}}/room/add" method="POST" id="addNewRoom-form" class="new-form">
            <label for="newRoomNumberInput" id="newRoomNumberInput-label">
                Room Number:
            </label>
            <input type="text" name="newRoomNumberInput" id="newRoomNumberInput">
            <label for="newRoomTypeInput" id="newRoomTypeInput-label">
                Room Type:
            </label>
            <select name="newRoomTypeInput" id="newRoomTypeInput">
                {{#each roomTypes}}
                <option value="{{roomTypes.typeName}}">{{roomTypes.typeName}}</option>
                {{/each}}
            </select>
            <button type="submit" id="addNewRoom-button">Add</button>
        </form>
    </div>
</div>
<div class="error" id="client">
    <p id="client-error"></p>
</div>
{{#if (eq user.identity "guest")}}
<div class="new-user">
    <p>You can <a href="/register">register</a> or <a href="/login">login</a> first.</p>
</div>
{{/if}}